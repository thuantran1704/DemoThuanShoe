{"ast":null,"code":"import _slicedToArray from\"D:/projects React/proShop/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{useDispatch,useSelector}from'react-redux';import{Row,Col,Button,Form,Table}from'react-bootstrap';import{LinkContainer}from'react-router-bootstrap';import Message from'../components/Message';import Loader from'../components/Loader';import{getUserDetail,updateUserProfile}from'../actions/userActions';import{listMyOrder}from'../actions/orderActions';import Meta from'../components/Meta';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ProfileScreen=function ProfileScreen(_ref){var location=_ref.location,history=_ref.history;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),name=_useState6[0],setName=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),phone=_useState8[0],setPhone=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),birthday=_useState10[0],setBirthday=_useState10[1];var _useState11=useState(''),_useState12=_slicedToArray(_useState11,2),confirmPassword=_useState12[0],setConfirmPassword=_useState12[1];var _useState13=useState(null),_useState14=_slicedToArray(_useState13,2),message=_useState14[0],setMessage=_useState14[1];var dispatch=useDispatch();var userDetail=useSelector(function(state){return state.userDetail;});var loading=userDetail.loading,error=userDetail.error,user=userDetail.user;var userLogin=useSelector(function(state){return state.userLogin;});var userInfo=userLogin.userInfo;var userUpdateProfile=useSelector(function(state){return state.userUpdateProfile;});var success=userUpdateProfile.success;var orderListMy=useSelector(function(state){return state.orderListMy;});var loadingOrders=orderListMy.loading,errorOrders=orderListMy.error,orders=orderListMy.orders;useEffect(function(){if(!userInfo){history.push(\"/login\");}else{if(!user.name){dispatch(getUserDetail('profile'));dispatch(listMyOrder());}else{setName(user.name);setEmail(user.email);setBirthday(user.birthday);setPhone(user.phone);}}},[dispatch,history,userInfo,user]);var submitHandler=function submitHandler(e){e.preventDefault();if(phone.length!==10){setMessage('Phone number is not in the correct format !');}else if(password!==confirmPassword){setMessage('Password do not match !');}else{dispatch(updateUserProfile({id:user._id,name:name,email:email,phone:phone,birthday:birthday,password:password}));dispatch(getUserDetail('profile'));}};return/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Meta,{title:\"\".concat(userInfo.name,\"'s Profile\")}),/*#__PURE__*/_jsxs(Col,{md:3,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"User Profile\"}),message&&/*#__PURE__*/_jsxs(Message,{variant:\"danger\",children:[\" \",message,\" \"]}),error&&/*#__PURE__*/_jsxs(Message,{variant:\"danger\",children:[\" \",error,\" \"]}),success&&/*#__PURE__*/_jsx(Message,{variant:\"success\",children:\" Profile updated \"}),loading&&/*#__PURE__*/_jsx(Loader,{}),/*#__PURE__*/_jsxs(Form,{onSubmit:submitHandler,children:[/*#__PURE__*/_jsxs(Form.Group,{controlId:\"name\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Name\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"name\",placeholder:\"Enter name\",value:name,onChange:function onChange(e){return setName(e.target.value);}})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"email\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Email Address\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"email\",placeholder:\"name@example.com\",value:email,onChange:function onChange(e){return setEmail(e.target.value);}}),/*#__PURE__*/_jsx(Form.Text,{className:\"text-muted\",children:\"Your email'll not be shared with anyone else.\"})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"phone\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Phone Number\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"number\",placeholder:\"Enter your phone number\",value:phone,onChange:function onChange(e){return setPhone(e.target.value);}})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"birthday\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Birthday\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"date\",placeholder:\"Enter your birthday\",value:birthday,onChange:function onChange(e){return setBirthday(e.target.value);}})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"password\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Password\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"password\",placeholder:\"Enter password\",value:password,onChange:function onChange(e){return setPassword(e.target.value);}})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"comfirmPassword\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Confirm Password\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"password\",placeholder:\"Confirm password\",value:confirmPassword,onChange:function onChange(e){return setConfirmPassword(e.target.value);}})]}),/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"primary\",children:\"Update\"})]})]}),/*#__PURE__*/_jsxs(Col,{md:9,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"My Orders\"}),loadingOrders?/*#__PURE__*/_jsx(Loader,{}):errorOrders?/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:errorOrders}):/*#__PURE__*/_jsxs(Table,{striped:true,bordered:true,hover:true,responsive:true,className:\"table-secondary\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\" DATE \"}),/*#__PURE__*/_jsx(\"th\",{children:\" TOTAL \"}),/*#__PURE__*/_jsx(\"th\",{children:\" METHOD \"}),/*#__PURE__*/_jsx(\"th\",{children:\" PAID \"}),/*#__PURE__*/_jsx(\"th\",{children:\" DELIVERED \"}),/*#__PURE__*/_jsx(\"th\",{})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:orders.map(function(order){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:order.createdAt.substring(0,10)}),/*#__PURE__*/_jsxs(\"td\",{children:[\"$\",' ',order.totalPrice]}),/*#__PURE__*/_jsx(\"td\",{children:order.paymentMethod}),/*#__PURE__*/_jsx(\"td\",{children:order.isPaid?order.paidAt.substring(0,10):/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-times\",style:{color:'red'}})}),/*#__PURE__*/_jsx(\"td\",{children:order.isDelivered?order.deliveredAt.substring(0,10):/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-times\",style:{color:'red'}})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(LinkContainer,{to:\"/order/\".concat(order._id),children:/*#__PURE__*/_jsx(Button,{className:\"btn btn-outline-secondary\",variant:\"light\",children:\" Details \"})})})]},order._id);})})]})]})]});};export default ProfileScreen;","map":{"version":3,"sources":["D:/projects React/proShop/frontend/src/screens/ProfileScreen.js"],"names":["React","useState","useEffect","useDispatch","useSelector","Row","Col","Button","Form","Table","LinkContainer","Message","Loader","getUserDetail","updateUserProfile","listMyOrder","Meta","ProfileScreen","location","history","email","setEmail","password","setPassword","name","setName","phone","setPhone","birthday","setBirthday","confirmPassword","setConfirmPassword","message","setMessage","dispatch","userDetail","state","loading","error","user","userLogin","userInfo","userUpdateProfile","success","orderListMy","loadingOrders","errorOrders","orders","push","submitHandler","e","preventDefault","length","id","_id","target","value","map","order","createdAt","substring","totalPrice","paymentMethod","isPaid","paidAt","color","isDelivered","deliveredAt"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { Row, Col, Button, Form, Table } from 'react-bootstrap'\r\nimport { LinkContainer } from 'react-router-bootstrap'\r\nimport Message from '../components/Message'\r\nimport Loader from '../components/Loader'\r\nimport { getUserDetail, updateUserProfile } from '../actions/userActions'\r\nimport { listMyOrder } from '../actions/orderActions'\r\nimport Meta from '../components/Meta'\r\n\r\n\r\nconst ProfileScreen = ({ location, history }) => {\r\n\r\n    const [email, setEmail] = useState('')\r\n    const [password, setPassword] = useState('')\r\n    const [name, setName] = useState('')\r\n    const [phone, setPhone] = useState('')\r\n    const [birthday, setBirthday] = useState('')\r\n    const [confirmPassword, setConfirmPassword] = useState('')\r\n    const [message, setMessage] = useState(null)\r\n\r\n    const dispatch = useDispatch()\r\n\r\n    const userDetail = useSelector(state => state.userDetail)\r\n    const { loading, error, user } = userDetail\r\n\r\n    const userLogin = useSelector(state => state.userLogin)\r\n    const { userInfo } = userLogin\r\n\r\n    const userUpdateProfile = useSelector((state) => state.userUpdateProfile)\r\n    const { success } = userUpdateProfile\r\n\r\n    const orderListMy = useSelector(state => state.orderListMy)\r\n    const { loading: loadingOrders, error: errorOrders, orders } = orderListMy\r\n\r\n    useEffect(() => {\r\n        if (!userInfo) {\r\n            history.push(\"/login\")\r\n        } else {\r\n            if (!user.name) {\r\n                dispatch(getUserDetail('profile'))\r\n                dispatch(listMyOrder())\r\n            } else {\r\n                setName(user.name)\r\n                setEmail(user.email)\r\n                setBirthday(user.birthday)\r\n                setPhone(user.phone)\r\n            }\r\n        }\r\n    }, [dispatch, history, userInfo, user])\r\n\r\n    const submitHandler = (e) => {\r\n        e.preventDefault()\r\n        if (phone.length !== 10) {\r\n            setMessage('Phone number is not in the correct format !')\r\n        }\r\n        else if (password !== confirmPassword) {\r\n            setMessage('Password do not match !')\r\n        }\r\n        else {\r\n            dispatch(updateUserProfile({ id: user._id, name, email, phone, birthday, password }))\r\n            dispatch(getUserDetail('profile'))\r\n        }\r\n    }\r\n\r\n    return (\r\n        <Row>\r\n            <Meta title={`${userInfo.name}'s Profile`} />\r\n            <Col md={3}>\r\n                <h2>User Profile</h2>\r\n                {message && <Message variant='danger'> {message} </Message>}\r\n                {error && <Message variant='danger'> {error} </Message>}\r\n                {success && <Message variant='success'> Profile updated </Message>}\r\n\r\n                {loading && <Loader />}\r\n                <Form onSubmit={submitHandler}>\r\n                    <Form.Group controlId='name'>\r\n                        <Form.Label>Name</Form.Label>\r\n                        <Form.Control type='name' placeholder='Enter name' value={name}\r\n                            onChange={(e) => setName(e.target.value)}></Form.Control>\r\n                    </Form.Group>\r\n\r\n                    <Form.Group controlId='email'>\r\n                        <Form.Label>Email Address</Form.Label>\r\n                        <Form.Control type='email' placeholder='name@example.com' value={email}\r\n                            onChange={(e) => setEmail(e.target.value)}></Form.Control>\r\n                        <Form.Text className=\"text-muted\">\r\n                            Your email'll not be shared with anyone else.\r\n                        </Form.Text>\r\n                    </Form.Group>\r\n\r\n                    <Form.Group controlId='phone'>\r\n                        <Form.Label>Phone Number</Form.Label>\r\n                        <Form.Control type='number' placeholder='Enter your phone number'\r\n                            value={phone}\r\n                            onChange={(e) => setPhone(e.target.value)}>\r\n                        </Form.Control>\r\n                    </Form.Group>\r\n\r\n                    <Form.Group controlId='birthday'>\r\n                        <Form.Label>Birthday</Form.Label>\r\n                        <Form.Control type='date' placeholder='Enter your birthday' value={birthday}\r\n                            onChange={(e) => setBirthday(e.target.value)}></Form.Control>\r\n                    </Form.Group>\r\n\r\n                    <Form.Group controlId='password'>\r\n                        <Form.Label>Password</Form.Label>\r\n                        <Form.Control type='password' placeholder='Enter password' value={password}\r\n                            onChange={(e) => setPassword(e.target.value)}></Form.Control>\r\n                    </Form.Group>\r\n\r\n                    <Form.Group controlId='comfirmPassword'>\r\n                        <Form.Label>Confirm Password</Form.Label>\r\n                        <Form.Control type='password' placeholder='Confirm password' value={confirmPassword}\r\n                            onChange={(e) => setConfirmPassword(e.target.value)}></Form.Control>\r\n                    </Form.Group>\r\n\r\n                    <Button type='submit' variant='primary'>\r\n                        Update\r\n                    </Button>\r\n                </Form>\r\n            </Col>\r\n\r\n            <Col md={9}>\r\n                <h2>My Orders</h2>\r\n                {loadingOrders ? <Loader />\r\n                    : errorOrders ? <Message variant='danger'>{errorOrders}</Message>\r\n                        : (\r\n                            <Table striped bordered hover responsive className='table-secondary'>\r\n                                <thead>\r\n                                    <tr>\r\n                                        <th> DATE </th>\r\n                                        <th> TOTAL </th>\r\n                                        <th> METHOD </th>\r\n                                        <th> PAID </th>\r\n                                        <th> DELIVERED </th>\r\n                                        <th></th>\r\n                                    </tr>\r\n                                </thead>\r\n\r\n                                <tbody>\r\n                                    {orders.map(order => (\r\n                                        <tr key={order._id}>\r\n                                            <td>{order.createdAt.substring(0, 10)}</td>\r\n                                            <td>${' '}{order.totalPrice}</td>\r\n                                            <td>{order.paymentMethod}</td>\r\n                                            <td>\r\n                                                {order.isPaid\r\n                                                    ? order.paidAt.substring(0, 10)\r\n                                                    : (\r\n                                                        <i className='fas fa-times' style={{ color: 'red' }}></i>\r\n                                                    )\r\n                                                }\r\n                                            </td>\r\n                                            <td>\r\n                                                {order.isDelivered\r\n                                                    ? order.deliveredAt.substring(0, 10)\r\n                                                    : (\r\n                                                        <i className='fas fa-times' style={{ color: 'red' }}></i>\r\n                                                    )\r\n                                                }\r\n                                            </td>\r\n                                            <td>\r\n                                                <LinkContainer to={`/order/${order._id}`}>\r\n                                                    <Button className=\"btn btn-outline-secondary\" variant='light'> Details </Button>\r\n                                                </LinkContainer>\r\n                                            </td>\r\n                                        </tr>\r\n                                    ))}\r\n                                </tbody>\r\n                            </Table>\r\n                        )}\r\n            </Col>\r\n        </Row>\r\n    )\r\n}\r\n\r\nexport default ProfileScreen"]},"metadata":{},"sourceType":"module"}